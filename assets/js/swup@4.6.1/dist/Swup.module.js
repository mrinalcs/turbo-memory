import t from"/assets/js/delegate-it@6.1.0/delegate.js?module";import{match as e}from"/assets/js/path-to-regexp@6.2.2/dist.es2015/index.js?module";let n=(t,e)=>String(t).toLowerCase().replace(/[\s/_.]+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+|-+$/g,"")||e||"",o=({hash:t}={})=>window.location.pathname+window.location.search+(t?window.location.hash:""),r=(t,e={})=>{let z={url:t=t||o({hash:!0}),random:Math.random(),source:"swup",...e};window.history.pushState(z,"",t)},i=(t=null,e={})=>{t=t||o({hash:!0});let z={...window.history.state||{},url:t,random:Math.random(),source:"swup",...e};window.history.replaceState(z,"",t)},s=(e,z,G,X)=>{let J=new AbortController;return t(e,z,G,X={...X,signal:J.signal}),{destroy:()=>J.abort()}};class a extends URL{constructor(t,e=document.baseURI){super(t.toString(),e),Object.setPrototypeOf(this,a.prototype)}get url(){return this.pathname+this.search}static fromElement(t){let e=t.getAttribute("href")||t.getAttribute("xlink:href")||"";return new a(e)}static fromUrl(t){return new a(t)}}let c=(t,z)=>{try{return e(t,z)}catch(G){throw Error(`[swup] Error parsing path "${String(t)}":
${String(G)}`)}},l=function(t,e={}){try{var z;let G=this;function X(z){let{status:X,url:Q}=te;return Promise.resolve(te.text()).then(function(z){if(500===X)throw G.hooks.call("fetch:error",J,{status:X,response:te,url:Q}),new h(`Server error: ${Q}`,{status:X,url:Q});if(!z)throw new h(`Empty response: ${Q}`,{status:X,url:Q});let{url:Y}=a.fromUrl(Q),Z={url:Y,html:z};return!J.cache.write||e.method&&"GET"!==e.method||t!==Y||G.cache.set(Z.url,Z),Z})}t=a.fromUrl(t).url;let{visit:J=G.visit}=e,Q={...G.options.requestHeaders,...e.headers},Y=null!==(z=e.timeout)&&void 0!==z?z:G.options.timeout,Z=new AbortController,{signal:tt}=Z;e={...e,headers:Q,signal:tt};let te,tn=!1,ti=null;Y&&Y>0&&(ti=setTimeout(()=>{tn=!0,Z.abort("timeout")},Y));let tr=function(z,X){try{var Q=Promise.resolve(G.hooks.call("fetch:request",J,{url:t,options:e},(t,{url:e,options:z})=>fetch(e,z))).then(function(t){te=t,ti&&clearTimeout(ti)})}catch(Y){return X(Y)}return Q&&Q.then?Q.then(void 0,X):Q}(0,function(e){if(tn)throw G.hooks.call("fetch:timeout",J,{url:t}),new h(`Request timed out: ${t}`,{url:t,timedOut:tn});if("AbortError"===(null==e?void 0:e.name)||tt.aborted)throw new h(`Request aborted: ${t}`,{url:t,aborted:!0});throw e});return Promise.resolve(tr&&tr.then?tr.then(X):X())}catch(to){return Promise.reject(to)}};class h extends Error{constructor(t,e){super(t),this.url=void 0,this.status=void 0,this.aborted=void 0,this.timedOut=void 0,this.name="FetchError",this.url=e.url,this.status=e.status,this.aborted=e.aborted||!1,this.timedOut=e.timedOut||!1}}class u{constructor(t){this.swup=void 0,this.pages=new Map,this.swup=t}get size(){return this.pages.size}get all(){let t=new Map;return this.pages.forEach((e,z)=>{t.set(z,{...e})}),t}has(t){return this.pages.has(this.resolve(t))}get(t){let e=this.pages.get(this.resolve(t));return e?{...e}:e}set(t,e){t=this.resolve(t),e={...e,url:t},this.pages.set(t,e),this.swup.hooks.callSync("cache:set",void 0,{page:e})}update(t,e){t=this.resolve(t);let z={...this.get(t),...e,url:t};this.pages.set(t,z)}delete(t){this.pages.delete(this.resolve(t))}clear(){this.pages.clear(),this.swup.hooks.callSync("cache:clear",void 0,void 0)}prune(t){this.pages.forEach((e,z)=>{t(z,e)&&this.delete(z)})}resolve(t){let{url:e}=a.fromUrl(t);return this.swup.resolveUrl(e)}}let d=(t,e=document)=>e.querySelector(t),m=(t,e=document)=>Array.from(e.querySelectorAll(t)),f=()=>new Promise(t=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{t()})})});function p(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then}function v(t,e=[]){return new Promise((z,G)=>{let X=t(...e);p(X)?X.then(z,G):z(X)})}function g(t){var e;null===(e=t=t||document.body)||void 0===e||e.getBoundingClientRect()}class w{constructor(t){this.swup=void 0,this.swupClasses=["to-","is-changing","is-rendering","is-popstate","is-animating","is-leaving"],this.swup=t}get selectors(){let{scope:t}=this.swup.visit.animation;return"containers"===t?this.swup.visit.containers:"html"===t?["html"]:Array.isArray(t)?t:[]}get selector(){return this.selectors.join(",")}get targets(){return this.selector.trim()?m(this.selector):[]}add(){}remove(){}clear(){this.targets.forEach(t=>{let e=t.className.split(" ").filter(t=>this.isSwupClass(t));t.classList.remove(...e)})}isSwupClass(t){return this.swupClasses.some(e=>t.startsWith(e))}}class y{constructor(t,e){this.id=void 0,this.state=void 0,this.from=void 0,this.to=void 0,this.containers=void 0,this.animation=void 0,this.trigger=void 0,this.cache=void 0,this.history=void 0,this.scroll=void 0;let{to:z,from:G=t.currentPageUrl,hash:X,el:J,event:Q}=e;this.id=Math.random(),this.state=1,this.from={url:G},this.to={url:z,hash:X},this.containers=t.options.containers,this.animation={animate:!0,wait:!1,name:void 0,native:t.options.native,scope:t.options.animationScope,selector:t.options.animationSelector},this.trigger={el:J,event:Q},this.cache={read:t.options.cache,write:t.options.cache},this.history={action:"push",popstate:!1,direction:void 0},this.scroll={reset:!0,target:void 0}}advance(t){this.state<t&&(this.state=t)}abort(){this.state=8}get done(){return this.state>=7}}function P(t){return new y(this,t)}let k="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function b(t,e,z){if(!t.s){if(z instanceof S){if(!z.s)return void(z.o=b.bind(null,t,e));1&e&&(e=z.s),z=z.v}if(z&&z.then)return void z.then(b.bind(null,t,e),b.bind(null,t,2));t.s=e,t.v=z;let G=t.o;G&&G(t)}}let S=function(){function t(){}return t.prototype.then=function(e,z){let G=new t,X=this.s;if(X){let J=1&X?e:z;if(J){try{b(G,1,J(this.v))}catch(Q){b(G,2,Q)}return G}return this}return this.o=function(t){try{let X=t.v;1&t.s?b(G,1,e?e(X):X):z?b(G,1,z(X)):b(G,2,X)}catch(J){b(G,2,J)}},G},t}();function E(t){return t instanceof S&&1&t.s}class U{constructor(t){this.swup=void 0,this.registry=new Map,this.hooks=["animation:out:start","animation:out:await","animation:out:end","animation:in:start","animation:in:await","animation:in:end","animation:skip","cache:clear","cache:set","content:replace","content:scroll","enable","disable","fetch:request","fetch:error","fetch:timeout","history:popstate","link:click","link:self","link:anchor","link:newtab","page:load","page:view","scroll:top","scroll:anchor","visit:start","visit:transition","visit:abort","visit:end"],this.swup=t,this.init()}init(){this.hooks.forEach(t=>this.create(t))}create(t){this.registry.has(t)||this.registry.set(t,new Map)}exists(t){return this.registry.has(t)}get(t){let e=this.registry.get(t);if(e)return e;console.error(`Unknown hook '${t}'`)}clear(){this.registry.forEach(t=>t.clear())}on(t,e,z={}){let G=this.get(t);if(!G)return console.warn(`Hook '${t}' not found.`),()=>{};let X={...z,id:G.size+1,hook:t,handler:e};return G.set(e,X),()=>this.off(t,e)}before(t,e,z={}){return this.on(t,e,{...z,before:!0})}replace(t,e,z={}){return this.on(t,e,{...z,replace:!0})}once(t,e,z={}){return this.on(t,e,{...z,once:!0})}off(t,e){let z=this.get(t);z&&e?z.delete(e)||console.warn(`Handler for hook '${t}' not found.`):z&&z.clear()}call(t,e,z,G){try{let X=this,[J,Q,Y]=X.parseCallArgs(t,e,z,G),{before:Z,handler:tt,after:te}=X.getHandlers(t,Y);return Promise.resolve(X.run(Z,J,Q)).then(function(){return Promise.resolve(X.run(tt,J,Q,!0)).then(function([e]){return Promise.resolve(X.run(te,J,Q)).then(function(){return X.dispatchDomEvent(t,J,Q),e})})})}catch(tn){return Promise.reject(tn)}}callSync(t,e,z,G){let[X,J,Q]=this.parseCallArgs(t,e,z,G),{before:Y,handler:Z,after:tt}=this.getHandlers(t,Q);this.runSync(Y,X,J);let[te]=this.runSync(Z,X,J,!0);return this.runSync(tt,X,J),this.dispatchDomEvent(t,X,J),te}parseCallArgs(t,e,z,G){return e instanceof y||"object"!=typeof e&&"function"!=typeof z?[e,z,G]:[void 0,e,z]}run(t,e,z,G=!1){try{let X,J=this;void 0===e&&(e=J.swup.visit);let Q=[],Y=function(t,e,z){if("function"==typeof t[k]){var G,X,J,Q,Y,Z,tt,te,tn,ti=t[k]();if(function t(G){try{for(;!((tt=ti.next()).done||z&&z());)if((G=e(tt.value))&&G.then){if(!E(G))return void G.then(t,tn||(tn=b.bind(null,te=new S,2)));G=G.v}te?b(te,1,G):te=G}catch(X){b(te||(te=new S),2,X)}}(),ti.return){var tr=function(t){try{tt.done||ti.return()}catch(e){}return t};if(te&&te.then)return te.then(tr,function(t){throw tr(t)});tr()}return te}if(!("length"in t))throw TypeError("Object is not iterable");for(var to=[],ts=0;ts<t.length;ts++)to.push(t[ts]);return G=to,X=function(t){return e(to[t])},J=z,Z=-1,function t(e){try{for(;++Z<G.length&&(!J||!J());)if((e=X(Z))&&e.then){if(!E(e))return void e.then(t,Y||(Y=b.bind(null,Q=new S,2)));e=e.v}Q?b(Q,1,e):Q=e}catch(z){b(Q||(Q=new S),2,z)}}(),Q}(t,function({hook:t,handler:X,defaultHandler:Y,once:Z}){var tt;if(!(null!==(tt=e)&&void 0!==tt&&tt.done))return Z&&J.off(t,X),function(t,G){try{var J=Promise.resolve(v(X,[e,z,Y])).then(function(t){Q.push(t)})}catch(Z){return G(Z)}return J&&J.then?J.then(void 0,G):J}(0,function(e){if(G)throw e;console.error(`Error in hook '${t}':`,e)})},function(){return X});return Promise.resolve(Y&&Y.then?Y.then(function(t){return X?t:Q}):X?Y:Q)}catch(Z){return Promise.reject(Z)}}runSync(t,e=this.swup.visit,z,G=!1){let X=[];for(let{hook:J,handler:Q,defaultHandler:Y,once:Z}of t)if(!(null!=e&&e.done)){Z&&this.off(J,Q);try{let tt=Q(e,z,Y);X.push(tt),p(tt)&&console.warn(`Swup will not await Promises in handler for synchronous hook '${J}'.`)}catch(te){if(G)throw te;console.error(`Error in hook '${J}':`,te)}}return X}getHandlers(t,e){let z=this.get(t);if(!z)return{found:!1,before:[],handler:[],after:[],replaced:!1};let G=Array.from(z.values()),X=this.sortRegistrations,J=G.filter(({before:t,replace:e})=>t&&!e).sort(X),Q=G.filter(({replace:t})=>t).filter(t=>!0).sort(X),Y=G.filter(({before:t,replace:e})=>!t&&!e).sort(X),Z=Q.length>0,tt=[];if(e&&(tt=[{id:0,hook:t,handler:e}],Z)){let te=Q.length-1,tn=t=>{let z=Q[t-1];return z?(e,G)=>z.handler(e,G,tn(t-1)):e};tt=[{id:0,hook:t,handler:Q[te].handler,defaultHandler:tn(te)}]}return{found:!0,before:J,handler:tt,after:Y,replaced:Z}}sortRegistrations(t,e){var z,G;return(null!==(z=t.priority)&&void 0!==z?z:0)-(null!==(G=e.priority)&&void 0!==G?G:0)||t.id-e.id||0}dispatchDomEvent(t,e,z){if(null!=e&&e.done)return;let G={hook:t,args:z,visit:e||this.swup.visit};document.dispatchEvent(new CustomEvent("swup:any",{detail:G,bubbles:!0})),document.dispatchEvent(new CustomEvent(`swup:${t}`,{detail:G,bubbles:!0}))}}let C=t=>{if(t&&"#"===t.charAt(0)&&(t=t.substring(1)),!t)return null;let e=decodeURIComponent(t),z=document.getElementById(t)||document.getElementById(e)||d(`a[name='${CSS.escape(t)}']`)||d(`a[name='${CSS.escape(e)}']`);return z||"top"!==t||(z=document.body),z},$=function({elements:t,selector:e}){try{if(!1===e&&!t)return Promise.resolve();let z=[];if(t)z=Array.from(t);else if(e&&!(z=m(e,document.body)).length)return Promise.resolve();let G=z.map(t=>(function(t){let{type:e,timeout:z,propCount:G}=function(t){let e=window.getComputedStyle(t),z=H(e,`${x}Delay`),G=H(e,`${x}Duration`),X=j(z,G),J=H(e,`${A}Delay`),Q=H(e,`${A}Duration`),Y=j(J,Q),Z=Math.max(X,Y),tt=Z>0?X>Y?x:A:null;return{type:tt,timeout:Z,propCount:tt?tt===x?G.length:Q.length:0}}(t);return!(!e||!z)&&new Promise(X=>{let J=`${e}end`,Q=performance.now(),Y=0,Z=()=>{t.removeEventListener(J,tt),X()},tt=e=>{if(e.target===t){var z;if(z=e,![`${x}end`,`${A}end`].includes(z.type))throw Error("Not a transition or animation event.");(performance.now()-Q)/1e3<e.elapsedTime||++Y>=G&&Z()}};setTimeout(()=>{Y<G&&Z()},z+1),t.addEventListener(J,tt)})})(t));return G.filter(Boolean).length>0?Promise.resolve(Promise.all(G)).then(function(){}):(e&&console.warn(`[swup] No CSS animation duration defined on elements matching \`${e}\``),Promise.resolve())}catch(X){return Promise.reject(X)}},x="transition",A="animation";function H(t,e){return(t[e]||"").split(", ")}function j(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((e,z)=>V(e)+V(t[z])))}function V(t){return 1e3*parseFloat(t)}let I=function(t,e={}){try{let z,G=this;function X(X){var J,Q;if(z)return X;G.navigating=!0,G.visit=t;let{el:Y}=t.trigger;e.referrer=e.referrer||G.currentPageUrl,!1===e.animate&&(t.animation.animate=!1),t.animation.animate||G.classes.clear();let Z=e.history||(null==Y?void 0:Y.getAttribute("data-swup-history"))||void 0;Z&&["push","replace"].includes(Z)&&(t.history.action=Z);let tt=e.animation||(null==Y?void 0:Y.getAttribute("data-swup-animation"))||void 0;return tt&&(t.animation.name=tt),"object"==typeof e.cache?(t.cache.read=null!==(J=e.cache.read)&&void 0!==J?J:t.cache.read,t.cache.write=null!==(Q=e.cache.write)&&void 0!==Q?Q:t.cache.write):void 0!==e.cache&&(t.cache={read:!!e.cache,write:!!e.cache}),delete e.cache,function(z,X){try{var J=function(z,X){try{var J=Promise.resolve(G.hooks.call("visit:start",t,void 0)).then(function(){function z(){if(!t.done)return Promise.resolve(G.hooks.call("visit:transition",t,void 0,function(){try{let e;function z(z){return e?z:(t.advance(4),Promise.resolve(G.animatePageOut(t)).then(function(){function e(){return Promise.resolve(G.animatePageIn(t)).then(function(){})}let z=function(){if(t.animation.native&&document.startViewTransition)return Promise.resolve(document.startViewTransition(function(){try{let e=G.renderPage;return Promise.resolve(X).then(function(z){return Promise.resolve(e.call(G,t,z))})}catch(z){return Promise.reject(z)}}).finished).then(function(){});{let e=G.renderPage;return Promise.resolve(X).then(function(z){return Promise.resolve(e.call(G,t,z)).then(function(){})})}}();return z&&z.then?z.then(e):e()}))}let J=function(){if(!t.animation.animate)return Promise.resolve(G.hooks.call("animation:skip",void 0)).then(function(){let z=G.renderPage;return Promise.resolve(X).then(function(X){return Promise.resolve(z.call(G,t,X)).then(function(){e=1})})})}();return Promise.resolve(J&&J.then?J.then(z):z(J))}catch(Q){return Promise.reject(Q)}})).then(function(){if(!t.done)return Promise.resolve(G.hooks.call("visit:end",t,void 0,()=>G.classes.clear())).then(function(){t.state=7,G.navigating=!1,G.onVisitEnd&&(G.onVisitEnd(),G.onVisitEnd=void 0)})})}t.state=3;let X=G.hooks.call("page:load",t,{options:e},function(t,e){try{function z(t){return e.page=t,e.cache=!!X,e.page}let X;return t.cache.read&&(X=G.cache.get(t.to.url)),Promise.resolve(X?z(X):Promise.resolve(G.fetchPage(t.to.url,e.options)).then(z))}catch(J){return Promise.reject(J)}});if(X.then(({html:e})=>{t.advance(5),t.to.html=e,t.to.document=new DOMParser().parseFromString(e,"text/html")}),!t.history.popstate){let J=t.to.url+t.to.hash;"replace"===t.history.action||t.to.url===G.currentPageUrl?i(J):(G.currentHistoryIndex++,r(J,{index:G.currentHistoryIndex}))}G.currentPageUrl=o(),t.history.popstate&&G.classes.add("is-popstate"),t.animation.name&&G.classes.add(`to-${n(t.animation.name)}`);let Q=function(){if(t.animation.wait)return Promise.resolve(X).then(function(){})}();return Q&&Q.then?Q.then(z):z()})}catch(Q){return X(Q)}return J&&J.then?J.then(void 0,X):J}(0,function(e){e&&!(null!=e&&e.aborted)?(t.state=9,console.error(e),G.options.skipPopStateHandling=()=>(window.location.assign(t.to.url+t.to.hash),!0),window.history.back()):t.state=8})}catch(Q){return X(!0,Q)}return J&&J.then?J.then(X.bind(null,!1),X.bind(null,!0)):X(!1,J)}(0,function(e,z){if(delete t.to.document,e)throw z;return z})}let J=function(){if(G.navigating)return function(){if(!(G.visit.state>=6))return Promise.resolve(G.hooks.call("visit:abort",G.visit,void 0)).then(function(){delete G.visit.to.document,G.visit.state=8});t.state=2,G.onVisitEnd=()=>G.performNavigation(t,e),z=1}()}();return Promise.resolve(J&&J.then?J.then(X):X(J))}catch(Q){return Promise.reject(Q)}};function L(t,e={},z={}){if("string"!=typeof t)throw Error("swup.navigate() requires a URL parameter");if(this.shouldIgnoreVisit(t,{el:z.el,event:z.event}))return void window.location.assign(t);let{url:G,hash:X}=a.fromUrl(t),J=this.createVisit({...z,to:G,hash:X});this.performNavigation(J,e)}let T=function(t){try{let e=this;return Promise.resolve(e.hooks.call("animation:out:start",t,void 0,()=>{e.classes.add("is-changing","is-animating","is-leaving")})).then(function(){return Promise.resolve(e.hooks.call("animation:out:await",t,{skip:!1},(t,{skip:z})=>{if(!z)return e.awaitAnimations({selector:t.animation.selector})})).then(function(){return Promise.resolve(e.hooks.call("animation:out:end",t,void 0)).then(function(){})})})}catch(z){return Promise.reject(z)}},q=function(t){var e;let z=t.to.document;if(!z)return!1;let G=(null===(e=z.querySelector("title"))||void 0===e?void 0:e.innerText)||"";document.title=G;let X=m('[data-swup-persist]:not([data-swup-persist=""])'),J=t.containers.map(t=>{let e=document.querySelector(t),G=z.querySelector(t);return e&&G?(e.replaceWith(G.cloneNode(!0)),!0):(e||console.warn(`[swup] Container missing in current document: ${t}`),G||console.warn(`[swup] Container missing in incoming document: ${t}`),!1)}).filter(Boolean);return X.forEach(t=>{let e=t.getAttribute("data-swup-persist"),z=d(`[data-swup-persist="${e}"]`);z&&z!==t&&z.replaceWith(t)}),J.length===t.containers.length},R=function(t){let e={behavior:"auto"},{target:z,reset:G}=t.scroll,X=null!=z?z:t.to.hash,J=!1;return X&&(J=this.hooks.callSync("scroll:anchor",t,{hash:X,options:e},(t,{hash:e,options:z})=>{let G=this.getAnchorElement(e);return G&&G.scrollIntoView(z),!!G})),G&&!J&&(J=this.hooks.callSync("scroll:top",t,{options:e},(t,{options:e})=>(window.scrollTo({top:0,left:0,...e}),!0))),J},N=function(t){try{let e=this;if(t.done)return Promise.resolve();let z=e.hooks.call("animation:in:await",t,{skip:!1},(t,{skip:z})=>{if(!z)return e.awaitAnimations({selector:t.animation.selector})});return Promise.resolve(f()).then(function(){return Promise.resolve(e.hooks.call("animation:in:start",t,void 0,()=>{e.classes.remove("is-animating")})).then(function(){return Promise.resolve(z).then(function(){return Promise.resolve(e.hooks.call("animation:in:end",t,void 0)).then(function(){})})})})}catch(G){return Promise.reject(G)}},D=function(t,e){try{let z=this;if(t.done)return Promise.resolve();t.advance(6);let{url:G}=e;return z.isSameResolvedUrl(o(),G)||(i(G),z.currentPageUrl=o(),t.to.url=z.currentPageUrl),Promise.resolve(z.hooks.call("content:replace",t,{page:e},(t,{})=>{if(z.classes.remove("is-leaving"),t.animation.animate&&z.classes.add("is-rendering"),!z.replaceContent(t))throw Error("[swup] Container mismatch, aborting");t.animation.animate&&(z.classes.add("is-changing","is-animating","is-rendering"),t.animation.name&&z.classes.add(`to-${n(t.animation.name)}`))})).then(function(){return Promise.resolve(z.hooks.call("content:scroll",t,void 0,()=>z.scrollToContent(t))).then(function(){return Promise.resolve(z.hooks.call("page:view",t,{url:z.currentPageUrl,title:document.title})).then(function(){})})})}catch(X){return Promise.reject(X)}},M=function(t){var e,z;if(Boolean(null===(e=z=t)||void 0===e?void 0:e.isSwupPlugin)){if(t.swup=this,!t._checkRequirements||t._checkRequirements())return t._beforeMount&&t._beforeMount(),t.mount(),this.plugins.push(t),this.plugins}else console.error("Not a swup plugin instance",t)};function O(t){let e=this.findPlugin(t);if(e)return e.unmount(),e._afterUnmount&&e._afterUnmount(),this.plugins=this.plugins.filter(t=>t!==e),this.plugins;console.error("No such plugin",e)}function W(t){return this.plugins.find(e=>e===t||e.name===t||e.name===`Swup${String(t)}`)}function B(t){if("function"!=typeof this.options.resolveUrl)return console.warn("[swup] options.resolveUrl expects a callback function."),t;let e=this.options.resolveUrl(t);return e&&"string"==typeof e?e.startsWith("//")||e.startsWith("http")?(console.warn("[swup] options.resolveUrl needs to return a relative url"),t):e:(console.warn("[swup] options.resolveUrl needs to return a url"),t)}function _(t,e){return this.resolveUrl(t)===this.resolveUrl(e)}let F={animateHistoryBrowsing:!1,animationSelector:'[class*="transition-"]',animationScope:"html",cache:!0,containers:["body"],ignoreVisit:(t,{el:e}={})=>!!(null!=e&&e.closest("[data-no-swup]")),linkSelector:"a[href]",linkToSelf:"scroll",native:!1,plugins:[],resolveUrl:t=>t,requestHeaders:{"X-Requested-With":"swup",Accept:"text/html, application/xhtml+xml"},skipPopStateHandling(t){var e;return"swup"!==(null===(e=t.state)||void 0===e?void 0:e.source)},timeout:0};class K{constructor(t={}){var e,z;this.version="4.6.1",this.options=void 0,this.defaults=F,this.plugins=[],this.visit=void 0,this.cache=void 0,this.hooks=void 0,this.classes=void 0,this.currentPageUrl=o(),this.currentHistoryIndex=void 0,this.clickDelegate=void 0,this.navigating=!1,this.onVisitEnd=void 0,this.use=M,this.unuse=O,this.findPlugin=W,this.log=()=>{},this.navigate=L,this.performNavigation=I,this.createVisit=P,this.delegateEvent=s,this.fetchPage=l,this.awaitAnimations=$,this.renderPage=D,this.replaceContent=q,this.animatePageIn=N,this.animatePageOut=T,this.scrollToContent=R,this.getAnchorElement=C,this.getCurrentUrl=o,this.resolveUrl=B,this.isSameResolvedUrl=_,this.options={...this.defaults,...t},this.handleLinkClick=this.handleLinkClick.bind(this),this.handlePopState=this.handlePopState.bind(this),this.cache=new u(this),this.classes=new w(this),this.hooks=new U(this),this.visit=this.createVisit({to:""}),this.currentHistoryIndex=null!==(e=null===(z=window.history.state)||void 0===z?void 0:z.index)&&void 0!==e?e:1,this.enable()}enable(){try{var t;let e=this,{linkSelector:z}=e.options;return e.clickDelegate=e.delegateEvent(z,"click",e.handleLinkClick),window.addEventListener("popstate",e.handlePopState),e.options.animateHistoryBrowsing&&(window.history.scrollRestoration="manual"),e.options.native=e.options.native&&!!document.startViewTransition,e.options.plugins.forEach(t=>e.use(t)),"swup"!==(null===(t=window.history.state)||void 0===t?void 0:t.source)&&i(null,{index:e.currentHistoryIndex}),Promise.resolve(f()).then(function(){return Promise.resolve(e.hooks.call("enable",void 0,void 0,()=>{})).then(function(){})})}catch(G){return Promise.reject(G)}}destroy(){try{let t=this;return t.clickDelegate.destroy(),window.removeEventListener("popstate",t.handlePopState),t.cache.clear(),t.options.plugins.forEach(e=>t.unuse(e)),Promise.resolve(t.hooks.call("disable",void 0,void 0,()=>{})).then(function(){t.hooks.clear()})}catch(e){return Promise.reject(e)}}shouldIgnoreVisit(t,{el:e,event:z}={}){let{origin:G,url:X,hash:J}=a.fromUrl(t);return G!==window.location.origin||!(!e||!this.triggerWillOpenNewWindow(e))||!!this.options.ignoreVisit(X+J,{el:e,event:z})}handleLinkClick(t){let e=t.delegateTarget,{href:z,url:G,hash:X}=a.fromElement(e);if(this.shouldIgnoreVisit(z,{el:e,event:t}))return;if(this.navigating&&G===this.visit.to.url)return void t.preventDefault();let J=this.createVisit({to:G,hash:X,el:e,event:t});t.metaKey||t.ctrlKey||t.shiftKey||t.altKey?this.hooks.callSync("link:newtab",J,{href:z}):0===t.button&&this.hooks.callSync("link:click",J,{el:e,event:t},()=>{var e;let z=null!==(e=J.from.url)&&void 0!==e?e:"";t.preventDefault(),G&&G!==z?this.isSameResolvedUrl(G,z)||this.performNavigation(J):X?this.hooks.callSync("link:anchor",J,{hash:X},()=>{i(G+X),this.scrollToContent(J)}):this.hooks.callSync("link:self",J,void 0,()=>{"navigate"===this.options.linkToSelf?this.performNavigation(J):(i(G),this.scrollToContent(J))})})}handlePopState(t){var e,z,G,X;let J=null!==(e=null===(z=t.state)||void 0===z?void 0:z.url)&&void 0!==e?e:window.location.href;if(this.options.skipPopStateHandling(t)||this.isSameResolvedUrl(o(),this.currentPageUrl))return;let{url:Q,hash:Y}=a.fromUrl(J),Z=this.createVisit({to:Q,hash:Y,event:t});Z.history.popstate=!0;let tt=null!==(G=null===(X=t.state)||void 0===X?void 0:X.index)&&void 0!==G?G:0;tt&&tt!==this.currentHistoryIndex&&(Z.history.direction=tt-this.currentHistoryIndex>0?"forwards":"backwards",this.currentHistoryIndex=tt),Z.animation.animate=!1,Z.scroll.reset=!1,Z.scroll.target=!1,this.options.animateHistoryBrowsing&&(Z.animation.animate=!0,Z.scroll.reset=!0),this.hooks.callSync("history:popstate",Z,{event:t},()=>{this.performNavigation(Z)})}triggerWillOpenNewWindow(t){return!!t.matches('[download], [target="_blank"]')}}export{a as Location,n as classify,r as createHistoryRecord,K as default,s as delegateEvent,g as forceReflow,o as getCurrentUrl,p as isPromise,c as matchPath,f as nextTick,d as query,m as queryAll,v as runAsPromise,i as updateHistoryRecord};